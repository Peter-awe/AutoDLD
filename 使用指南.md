# AutoDLD 使用指南

## 🎯 项目完成总结

✅ **AutoDLD学术期刊日报系统已成功创建！**

### 📋 已完成的功能模块

1. **✅ 配置文件系统** (`config.py`)
   - DeepSeek API配置
   - 邮箱SMTP配置
   - 期刊网站列表
   - 爬取和定时任务配置

2. **✅ 网页爬取模块** (`crawler.py`)
   - 支持10个顶级学术期刊
   - 过去7天文章爬取
   - 智能解析不同网站结构
   - 错误处理和日志记录

3. **✅ AI摘要生成** (`summarizer.py`)
   - DeepSeek API集成
   - 300-500字中文摘要生成
   - 备用摘要生成机制
   - 智能长度控制

4. **✅ HTML页面生成** (`html_generator.py`)
   - 响应式设计，支持深色/浅色模式
   - 美观的日报界面
   - 移动端适配
   - 邮件专用HTML生成

5. **✅ 邮件发送系统** (`email_sender.py`)
   - QQ邮箱SMTP支持
   - HTML邮件内容
   - 错误处理和连接测试
   - 安全的TLS加密

6. **✅ 定时任务管理** (`scheduler.py`)
   - 自动cron任务配置
   - 每天8点自动执行
   - 任务状态管理
   - 详细的日志记录

7. **✅ 主程序集成** (`main.py`)
   - 完整的日报生成流程
   - 命令行参数支持
   - 系统测试功能
   - 详细的执行日志

8. **✅ 安装和配置** (`setup.py`)
   - 自动化安装向导
   - 依赖包安装
   - 邮箱配置引导
   - 系统测试验证

## 🚀 快速启动指南

### 第一步：安装依赖
```bash
cd /Users/ambrose/Desktop/codelab/AutoDLD
pip install -r requirements.txt
```

### 第二步：配置邮箱（重要！）
```bash
python3 setup.py
```
按照提示输入：
- 您的QQ邮箱地址
- QQ邮箱授权码（不是密码）

### 第三步：测试系统
```bash
# 测试所有功能
python3 main.py --test

# 测试邮箱连接
python3 email_sender.py
```

### 第四步：设置定时任务
```bash
# 设置每天8点自动执行
python3 main.py --setup-schedule

# 或者手动管理定时任务
python3 scheduler.py status    # 查看状态
python3 scheduler.py add       # 添加任务
```

### 第五步：手动运行日报生成
```bash
# 生成日报（发送邮件并打开浏览器）
python3 main.py

# 仅生成日报不发送邮件
python3 main.py --no-email

# 仅生成日报不打开浏览器
python3 main.py --no-browser
```

## 📧 邮箱配置说明

### 获取QQ邮箱授权码
1. 登录QQ邮箱网页版
2. 进入"设置" → "账户"
3. 找到"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
4. 开启"POP3/SMTP服务"
5. 按照提示获取16位授权码

### 配置信息位置
编辑 `config.py` 文件的 `EMAIL_CONFIG` 部分：
```python
EMAIL_CONFIG = {
    'smtp_server': 'smtp.qq.com',
    'smtp_port': 587,
    'sender_email': '您的QQ邮箱@qq.com',  # 修改这里
    'sender_password': '您的授权码',      # 修改这里
    'receiver_email': '1043595964@qq.com'
}
```

## ⏰ 定时任务说明

### 执行时间
- **默认时间**: 每天上午8:00
- **执行命令**: 自动运行日报生成流程
- **日志文件**: `logs/scheduler.log`

### 管理定时任务
```bash
# 查看当前定时任务
crontab -l

# 编辑定时任务（谨慎操作）
crontab -e

# 通过程序管理
python3 scheduler.py status    # 查看状态
python3 scheduler.py remove    # 移除任务
python3 scheduler.py enable    # 启用任务
python3 scheduler.py disable   # 禁用任务
```

## 📊 日报内容示例

### 邮件标题
`每日新闻导览 - 2024-09-28`

### 邮件内容包含
1. **今日导览摘要** (AI生成，300-500字)
2. **期刊文章列表** (按期刊分组)
3. **统计信息** (文章数量、期刊分布)
4. **生成时间戳**

### HTML页面特性
- 响应式设计，适配各种设备
- 深色/浅色模式自动切换
- 平滑动画效果
- 便捷的导航功能

## 🔧 故障排除

### 常见问题解决

1. **邮箱认证失败**
   ```bash
   # 重新配置邮箱
   python3 setup.py
   ```

2. **爬取失败**
   ```bash
   # 查看爬虫日志
   tail -f logs/crawler.log
   ```

3. **API调用失败**
   ```bash
   # 检查网络连接
   # 验证DeepSeek API密钥
   ```

4. **定时任务不执行**
   ```bash
   # 检查cron服务状态
   sudo systemctl status cron

   # 查看执行日志
   tail -f logs/scheduler.log
   ```

### 日志文件位置
所有日志文件都在 `logs/` 目录下：
- `main.log` - 主程序日志
- `crawler.log` - 爬虫日志  
- `summarizer.log` - 摘要生成日志
- `html_generator.log` - HTML生成日志
- `email_sender.log` - 邮件发送日志
- `scheduler.log` - 定时任务日志

## 📈 性能优化建议

1. **网络优化**: 确保稳定的网络连接
2. **时间设置**: 避免高峰期执行爬取任务
3. **日志管理**: 定期清理旧的日志文件
4. **监控设置**: 设置邮件通知异常情况

## 🔒 安全注意事项

1. **API密钥保护**: 不要泄露DeepSeek API密钥
2. **邮箱安全**: 使用授权码而非密码
3. **文件权限**: 确保配置文件权限正确
4. **网络安全**: 使用TLS加密的邮件传输

## 📞 技术支持

如有问题，请检查：
1. 日志文件中的错误信息
2. 网络连接状态
3. 邮箱配置是否正确
4. API密钥是否有效

如需进一步帮助，请联系：1043595964@qq.com

---

**🎉 恭喜！您的学术期刊日报系统已准备就绪！**

系统将每天自动为您提供最新的学术研究动态，帮助您及时了解各领域的前沿进展。
